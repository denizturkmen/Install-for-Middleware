{
	"info": {
		"_postman_id": "37ae1ee2-9617-4db2-8452-128932c9aaee",
		"name": "Hashicorp Terraform Cloud",
		"schema": "https://schema.getpostman.com/json/collection/v2.0.0/collection.json",
		"_exporter_id": "36224015",
		"_collection_link": "https://www.postman.com/waffle-lab/workspace/hashicorp/collection/2775488-37ae1ee2-9617-4db2-8452-128932c9aaee?action=share&source=collection_link&creator=36224015"
	},
	"item": [
		{
			"name": "Variable Manipulation",
			"item": [
				{
					"name": "Create New Workspace Variables",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = JSON.parse(responseBody);\r",
									"\r",
									"pm.environment.set(\"Terraform_VariableID\", jsonData.data.id);"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disabledSystemHeaders": {
							"content-type": true
						}
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": {
								"token": "{{Terraform_Cloud_User_Token}}"
							}
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/vnd.api+json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"data\": {\r\n    \"type\":\"vars\",\r\n    \"attributes\": {\r\n      \"key\":\"{{Terraform_New_Variable_Key}}\",\r\n      \"value\":\"\",\r\n      \"description\":\"This has been updated as of {{currentdate}}\",\r\n      \"category\":\"terraform\",\r\n      \"hcl\":false,\r\n      \"sensitive\":true\r\n    }\r\n  }\r\n}\r\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": "https://app.terraform.io/api/v2/workspaces/{{Terraform_WorkspaceID}}/vars"
					},
					"response": []
				},
				{
					"name": "Apply Variable Set to Workspaces",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = JSON.parse(responseBody);\r",
									"\r",
									"pm.environment.set(\"Terraform_VariableID\", jsonData.data.id);"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disabledSystemHeaders": {
							"content-type": true
						}
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": {
								"token": "{{Terraform_Cloud_User_Token}}"
							}
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/vnd.api+json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"data\": [\r\n    {\r\n      \"type\": \"workspaces\",\r\n      \"id\": \"ws-YwfuBJZkdai4xj9w\"\r\n    }\r\n  ]\r\n}\r\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://app.terraform.io/api/v2/varsets/:varset_id/relationships/workspaces",
							"protocol": "https",
							"host": [
								"app",
								"terraform",
								"io"
							],
							"path": [
								"api",
								"v2",
								"varsets",
								":varset_id",
								"relationships",
								"workspaces"
							],
							"variable": [
								{
									"key": "varset_id",
									"value": "varset-insertyourworkspacehere"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Update Workspace Variables",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"var moment = require('moment');\r",
									"\r",
									"pm.environment.set('currentdate', moment().format((\"YYYY-MM-DD\")));"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disabledSystemHeaders": {
							"content-type": true
						}
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": {
								"token": "{{Terraform_Cloud_User_Token}}"
							}
						},
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/vnd.api+json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"data\": {\r\n    \"type\":\"vars\",\r\n    \"attributes\": {\r\n      \"value\":\"{{Terraform_Updated_Variable_Key_Value}}\",\r\n      \"description\":\"This has been updated as of {{currentdate}}\",\r\n      \"category\":\"terraform\",\r\n      \"hcl\":false\r\n    }\r\n  }\r\n}\r\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://app.terraform.io/api/v2/workspaces/{{Terraform_WorkspaceID}}/vars/{{Terraform_VariableID}}",
							"protocol": "https",
							"host": [
								"app",
								"terraform",
								"io"
							],
							"path": [
								"api",
								"v2",
								"workspaces",
								"{{Terraform_WorkspaceID}}",
								"vars",
								"{{Terraform_VariableID}}"
							],
							"query": [
								{
									"key": "{{output_from_Vault}}",
									"value": "{{body.data.username}}",
									"disabled": true
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete Workspace Variable",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.environment.set(\"Terraform_VariableID\", null);\r",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disabledSystemHeaders": {
							"content-type": true
						}
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": {
								"token": "{{Terraform_Cloud_User_Token}}"
							}
						},
						"method": "DELETE",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/vnd.api+json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": "https://app.terraform.io/api/v2/workspaces/{{Terraform_WorkspaceID}}/vars/{{Terraform_VariableID}}"
					},
					"response": []
				}
			]
		},
		{
			"name": "API Workspace Execution",
			"item": [
				{
					"name": "Create Workspace and Execute (non-VCS)",
					"item": [
						{
							"name": "Create Workspace",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"var moment = require('moment');\r",
											"\r",
											"pm.environment.set('currentdate', moment().format((\"YYYY-MM-DD-HH:SS\")));\r",
											"pm.environment.set('Terraform_Workspace_AutoDestroy_Date', moment().add(5,'m'))\r",
											"//https://momentjscom.readthedocs.io/en/latest/moment/03-manipulating/01-add/#:~:text=This%20is%20a%20pretty%20robust,(7%2C%20'days')%3B"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = JSON.parse(responseBody);\r",
											"\r",
											"pm.environment.set(\"Terraform_WorkspaceID\", jsonData.data.id);\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": {
										"token": "{{Terraform_Org_Token}}"
									}
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/vnd.api+json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"data\": {\r\n        \"attributes\": {\r\n            \"name\": \"{{Terraform_WorkspaceName}}\",\r\n            \"description\": null,\r\n            \"environment\": \"default\",\r\n            \"blueprint-url\": null,\r\n            \"source-module-id\": \"{{Terraform_ModulePath}}\",\r\n            \"execution-mode\": \"remote\",\r\n            \"auto-apply\": false,\r\n            \"assessments-enabled\": false,\r\n            \"speculative-enabled\": true,\r\n            \"pull-request-outputs-enabled\": false,\r\n            \"working-directory\": \"\",\r\n            \"terraform-version\": null,\r\n            \"allow-destroy-plan\": true,\r\n            \"auto-destroy-at\": null,\r\n            \"vcs-repo\": null,\r\n            \"file-triggers-enabled\": false,\r\n            \"trigger-prefixes\": [],\r\n            \"trigger-patterns\": [],\r\n            \"structured-run-output-enabled\": true,\r\n            \"tag-names\": []\r\n        },\r\n        \"relationships\": {\r\n            \"organization\": {\r\n                \"data\": {\r\n                    \"type\": \"organizations\",\r\n                    \"id\": \"{{Terraform_Org_Name}}\"\r\n                }\r\n            }\r\n        },\r\n        \"type\": \"workspaces\"\r\n    }\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": "https://app.terraform.io/api/v2/organizations/{{Terraform_Org_Name}}/workspaces"
							},
							"response": [
								{
									"name": "Create Workspace",
									"originalRequest": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/vnd.api+json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"data\": {\r\n        \"attributes\": {\r\n            \"name\": \"{{Terraform_WorkspaceName}}\",\r\n            \"description\": \"Created via Postman\",\r\n            \"environment\": \"default\",\r\n            \"blueprint-url\": null,\r\n            \"source-module-id\": null,\r\n            \"execution-mode\": \"remote\",\r\n            \"auto-apply\": true,\r\n            \"drift-detection\": true,\r\n            \"speculative-enabled\": false,\r\n            \"pull-request-outputs-enabled\": false,\r\n            \"working-directory\": \"\",\r\n            \"terraform-version\": null,\r\n            \"allow-destroy-plan\": true,\r\n            \"auto-destroy-at\": \"{{Terraform_Workspace_AutoDestroy_Date}}\",\r\n            \"vcs-repo\": null,\r\n            \"file-triggers-enabled\": false,\r\n            \"trigger-prefixes\": [],\r\n            \"trigger-patterns\": [],\r\n            \"structured-run-output-enabled\": true,\r\n            \"tag-names\": []\r\n        },\r\n        \"relationships\": {\r\n            \"organization\": {\r\n                \"data\": {\r\n                    \"type\": \"organizations\",\r\n                    \"id\": \"bm_mi_lab\"\r\n                }\r\n            }\r\n        },\r\n        \"type\": \"workspaces\"\r\n    }\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": "https://app.terraform.io/api/v2/organizations/{{Terraform_Org_Name}}/workspaces"
									},
									"status": "Created",
									"code": 201,
									"_postman_previewlanguage": "json",
									"header": [
										{
											"key": "Date",
											"value": "Wed, 17 Aug 2022 16:31:51 GMT"
										},
										{
											"key": "Content-Type",
											"value": "application/vnd.api+json; charset=utf-8"
										},
										{
											"key": "Transfer-Encoding",
											"value": "chunked"
										},
										{
											"key": "Connection",
											"value": "keep-alive"
										},
										{
											"key": "Cache-Control",
											"value": "max-age=0, private, must-revalidate"
										},
										{
											"key": "Etag",
											"value": "W/\"825bdff05deafed4e3821e8a2f7e94ca\""
										},
										{
											"key": "Referrer-Policy",
											"value": "strict-origin-when-cross-origin"
										},
										{
											"key": "Strict-Transport-Security",
											"value": "max-age=63072000; includeSubDomains; preload"
										},
										{
											"key": "Tfp-Api-Version",
											"value": "2.5"
										},
										{
											"key": "Vary",
											"value": "Accept-Encoding"
										},
										{
											"key": "Vary",
											"value": "Accept, Origin"
										},
										{
											"key": "X-Content-Type-Options",
											"value": "nosniff"
										},
										{
											"key": "X-Download-Options",
											"value": "noopen"
										},
										{
											"key": "X-Frame-Options",
											"value": "SAMEORIGIN"
										},
										{
											"key": "X-Permitted-Cross-Domain-Policies",
											"value": "none"
										},
										{
											"key": "X-Ratelimit-Limit",
											"value": "30"
										},
										{
											"key": "X-Ratelimit-Remaining",
											"value": "29"
										},
										{
											"key": "X-Ratelimit-Reset",
											"value": "0.734"
										},
										{
											"key": "X-Request-Id",
											"value": "3c9edb0b-8f70-083a-8f6a-afe4349ee509"
										},
										{
											"key": "X-Xss-Protection",
											"value": "1; mode=block"
										}
									],
									"cookie": [],
									"body": "{\n    \"data\": {\n        \"id\": \"ws-Tp6PgBPp9bswSHra\",\n        \"type\": \"workspaces\",\n        \"attributes\": {\n            \"allow-destroy-plan\": true,\n            \"auto-apply\": true,\n            \"auto-destroy-at\": \"2022-08-17T16:36:49.654Z\",\n            \"created-at\": \"2022-08-17T16:31:51.236Z\",\n            \"environment\": \"default\",\n            \"locked\": false,\n            \"name\": \"automate-this\",\n            \"pull-request-outputs-enabled\": false,\n            \"queue-all-runs\": false,\n            \"speculative-enabled\": false,\n            \"structured-run-output-enabled\": true,\n            \"terraform-version\": \"1.2.7\",\n            \"working-directory\": \"\",\n            \"global-remote-state\": false,\n            \"updated-at\": \"2022-08-17T16:31:51.236Z\",\n            \"resource-count\": 0,\n            \"apply-duration-average\": null,\n            \"plan-duration-average\": null,\n            \"policy-check-failures\": null,\n            \"run-failures\": null,\n            \"workspace-kpis-runs-count\": null,\n            \"latest-change-at\": \"2022-08-17T16:31:51.236Z\",\n            \"operations\": true,\n            \"execution-mode\": \"remote\",\n            \"vcs-repo\": null,\n            \"vcs-repo-identifier\": null,\n            \"permissions\": {\n                \"can-update\": true,\n                \"can-destroy\": true,\n                \"can-queue-run\": false,\n                \"can-read-variable\": true,\n                \"can-update-variable\": true,\n                \"can-read-state-versions\": true,\n                \"can-read-state-outputs\": true,\n                \"can-create-state-versions\": false,\n                \"can-queue-apply\": false,\n                \"can-lock\": false,\n                \"can-unlock\": false,\n                \"can-force-unlock\": false,\n                \"can-read-settings\": true,\n                \"can-manage-tags\": true,\n                \"can-manage-run-tasks\": true,\n                \"can-manage-assessments\": true,\n                \"can-read-assessment-results\": true,\n                \"can-queue-destroy\": false\n            },\n            \"actions\": {\n                \"is-destroyable\": true\n            },\n            \"description\": \"Created via Postman\",\n            \"file-triggers-enabled\": false,\n            \"trigger-prefixes\": [],\n            \"trigger-patterns\": [],\n            \"drift-detection\": true,\n            \"last-assessment-result-at\": null,\n            \"source\": \"tfe-api\",\n            \"source-name\": null,\n            \"source-url\": null,\n            \"tag-names\": []\n        },\n        \"relationships\": {\n            \"organization\": {\n                \"data\": {\n                    \"id\": \"bm_mi_lab\",\n                    \"type\": \"organizations\"\n                }\n            },\n            \"current-run\": {\n                \"data\": null\n            },\n            \"latest-run\": {\n                \"data\": null\n            },\n            \"outputs\": {\n                \"data\": []\n            },\n            \"remote-state-consumers\": {\n                \"links\": {\n                    \"related\": \"/api/v2/workspaces/ws-Tp6PgBPp9bswSHra/relationships/remote-state-consumers\"\n                }\n            },\n            \"current-state-version\": {\n                \"data\": null\n            },\n            \"current-configuration-version\": {\n                \"data\": null\n            },\n            \"agent-pool\": {\n                \"data\": null\n            },\n            \"readme\": {\n                \"data\": null\n            },\n            \"current-assessment-result\": {\n                \"data\": null\n            },\n            \"vars\": {\n                \"data\": []\n            }\n        },\n        \"links\": {\n            \"self\": \"/api/v2/organizations/bm_mi_lab/workspaces/automate-this\"\n        }\n    }\n}"
								}
							]
						},
						{
							"name": "Update Workspace Variable Sets",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"var moment = require('moment');\r",
											"\r",
											"pm.environment.set('currentdate', moment().format((\"YYYY-MM-DD-HH:SS\")));"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": {
										"token": "{{Terraform_Cloud_User_Token}}"
									}
								},
								"method": "PATCH",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/vnd.api+json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"data\": [\r\n        {\r\n            \"attributes\": {\r\n                \"key\": \"location\",\r\n                \"value\": \"eastus\",\r\n                \"hcl\": false,\r\n                \"sensitive\": false,\r\n                \"category\": \"terraform\"\r\n            },\r\n            \"relationships\": {\r\n                \"configurable\": {\r\n                    \"data\": {\r\n                        \"type\": \"workspaces\",\r\n                        \"id\": \"{{Terraform_WorkspaceID}}\"\r\n                    }\r\n                }\r\n            },\r\n            \"type\": \"vars\"\r\n        },\r\n        {\r\n            \"attributes\": {\r\n                \"key\": \"resourceName\",\r\n                \"value\": \"test-network\",\r\n                \"hcl\": false,\r\n                \"sensitive\": false,\r\n                \"category\": \"terraform\"\r\n            },\r\n            \"relationships\": {\r\n                \"configurable\": {\r\n                    \"data\": {\r\n                        \"type\": \"workspaces\",\r\n                        \"id\": \"{{Terraform_WorkspaceID}}\"\r\n                    }\r\n                }\r\n            },\r\n            \"type\": \"vars\"\r\n        }\r\n    ]\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": "https://app.terraform.io/api/v2/workspaces/{{Terraform_WorkspaceID}}/relationships/vars"
							},
							"response": []
						},
						{
							"name": "Create Config Version",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"var moment = require('moment');\r",
											"\r",
											"pm.environment.set('currentdate', moment().format((\"YYYY-MM-DD-HH:SS\")));"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = JSON.parse(responseBody);\r",
											"\r",
											"pm.environment.set(\"Terraform_UploadURL\", jsonData.data.attributes['upload-url']);\r",
											"\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": {
										"token": "{{Terraform_Cloud_User_Token}}"
									}
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/vnd.api+json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"data\": {\r\n        \"type\": \"configuration-versions\"\r\n    }\r\n}"
								},
								"url": "https://app.terraform.io/api/v2/workspaces/{{Terraform_WorkspaceID}}/configuration-versions"
							},
							"response": [
								{
									"name": "Create Config Version",
									"originalRequest": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/vnd.api+json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"data\":{\r\n        \"type\":\"configuration-versions\"\r\n        }\r\n    }"
										},
										"url": "https://app.terraform.io/api/v2/workspaces/{{Terraform_WorkspaceID}}/configuration-versions"
									},
									"status": "Created",
									"code": 201,
									"_postman_previewlanguage": "json",
									"header": [
										{
											"key": "Date",
											"value": "Wed, 17 Aug 2022 16:32:12 GMT"
										},
										{
											"key": "Content-Type",
											"value": "application/vnd.api+json; charset=utf-8"
										},
										{
											"key": "Content-Length",
											"value": "973"
										},
										{
											"key": "Connection",
											"value": "keep-alive"
										},
										{
											"key": "Cache-Control",
											"value": "max-age=0, private, must-revalidate"
										},
										{
											"key": "Etag",
											"value": "W/\"08190fa8aa7920f29820ed9964978d55\""
										},
										{
											"key": "Referrer-Policy",
											"value": "strict-origin-when-cross-origin"
										},
										{
											"key": "Strict-Transport-Security",
											"value": "max-age=63072000; includeSubDomains; preload"
										},
										{
											"key": "Tfp-Api-Version",
											"value": "2.5"
										},
										{
											"key": "Vary",
											"value": "Accept-Encoding"
										},
										{
											"key": "Vary",
											"value": "Accept, Origin"
										},
										{
											"key": "X-Content-Type-Options",
											"value": "nosniff"
										},
										{
											"key": "X-Download-Options",
											"value": "noopen"
										},
										{
											"key": "X-Frame-Options",
											"value": "SAMEORIGIN"
										},
										{
											"key": "X-Permitted-Cross-Domain-Policies",
											"value": "none"
										},
										{
											"key": "X-Ratelimit-Limit",
											"value": "30"
										},
										{
											"key": "X-Ratelimit-Remaining",
											"value": "29"
										},
										{
											"key": "X-Ratelimit-Reset",
											"value": "0.271"
										},
										{
											"key": "X-Request-Id",
											"value": "a705f616-64e1-e4e8-bdf3-fbe3f8c4e2e3"
										},
										{
											"key": "X-Xss-Protection",
											"value": "1; mode=block"
										}
									],
									"cookie": [],
									"body": "{\n    \"data\": {\n        \"id\": \"cv-FRqEpZEp1nTLD1Ci\",\n        \"type\": \"configuration-versions\",\n        \"attributes\": {\n            \"auto-queue-runs\": true,\n            \"error\": null,\n            \"error-message\": null,\n            \"source\": \"tfe-api\",\n            \"speculative\": false,\n            \"status\": \"pending\",\n            \"status-timestamps\": {},\n            \"changed-files\": [],\n            \"upload-url\": \"https://archivist.terraform.io/v1/object/dmF1bHQ6djI6d1ZhWDRoVjVMUHlONnl5N3VTeExwamhDZWd6NG44emkxV29nMzh3aWlaV1huU2cwQTVsSUFHKzh2TEdGVFNtTFFTZTVUanJQaVUwazZYZUFPNVdhRk5BU0lCMzU3ZVV3VWMwbzZYemV5dTlCenZNWUorSi9JZVB3VE40QUpzU1B0dEpkNE1XcHZGcFl0QVM4OU5HaVhDZlNTTHljRnhvK3lqRGJiaVBvN2NSRjV3L2lYdHAyVEJ1b0FFbjRCLzMrdnBOdGNiNFhXTTQ0RENET3dqVmJCVjhGV0ZHZEd6Uzg4YUtxYXJGWDVNaWZ2dENUeDFqaVFEai9HalVtVWpJLzJJZXJKWjRYbHJOOHo0L25OdCtHOHh0M0ZHL1I1WVd0aERsaGowMXVUeVhuRm5UTEJZSkR6THcrdlU5RWJyRGFoYnlNZWVZNnI2YWtxVUlB\"\n        },\n        \"relationships\": {\n            \"ingress-attributes\": {\n                \"data\": null,\n                \"links\": {\n                    \"related\": \"/api/v2/configuration-versions/cv-FRqEpZEp1nTLD1Ci/ingress-attributes\"\n                }\n            }\n        },\n        \"links\": {\n            \"self\": \"/api/v2/configuration-versions/cv-FRqEpZEp1nTLD1Ci\"\n        }\n    }\n}"
								}
							]
						},
						{
							"name": "Upload Test",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"var moment = require('moment');\r",
											"\r",
											"pm.environment.set('currentdate', moment().format((\"YYYY-MM-DD-HH:SS\")));"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": {
										"token": "{{Terraform_Cloud_User_Token}}"
									}
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/octet-stream",
										"type": "text"
									}
								],
								"body": {
									"mode": "file",
									"file": {
										"src": ""
									}
								},
								"url": "{{Terraform_UploadURL}}"
							},
							"response": [
								{
									"name": "Upload Test",
									"originalRequest": {
										"method": "PUT",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/vnd.api+json",
												"type": "text"
											}
										],
										"body": {
											"mode": "file",
											"file": {
												"src": "/C:/repo/Demo Environment Build Outs/Postman/Terraform API Example/tf_code/tf_code.tar.gz"
											}
										},
										"url": "{{Terraform_UploadURL}}"
									},
									"status": "OK",
									"code": 200,
									"_postman_previewlanguage": "plain",
									"header": [
										{
											"key": "Date",
											"value": "Wed, 17 Aug 2022 16:32:20 GMT"
										},
										{
											"key": "Content-Length",
											"value": "0"
										},
										{
											"key": "Connection",
											"value": "keep-alive"
										},
										{
											"key": "Access-Control-Allow-Headers",
											"value": "Accept, Accept-Encoding, Authorization, Content-Length, Content-Type, Forwarded, Postman-Token, User-Agent, X-Amzn-Trace-Id, X-Forwarded-For, X-Forwarded-Host, X-Forwarded-Port, X-Forwarded-Proto, X-Real-Ip, X-Request-Id"
										},
										{
											"key": "Access-Control-Allow-Methods",
											"value": "GET, PUT, PATCH, HEAD, OPTIONS"
										},
										{
											"key": "Access-Control-Allow-Origin",
											"value": "*"
										},
										{
											"key": "Access-Control-Expose-Headers",
											"value": "Location"
										},
										{
											"key": "Vary",
											"value": "Accept-Encoding"
										}
									],
									"cookie": [],
									"body": null
								}
							]
						}
					]
				},
				{
					"name": "Create Workspace with VCS Connection and Execute",
					"item": [
						{
							"name": "Create Workspace",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"var moment = require('moment');\r",
											"\r",
											"pm.environment.set('currentdate', moment().format((\"YYYY-MM-DD-HH:SS\")));\r",
											"pm.environment.set('Terraform_Workspace_AutoDestroy_Date', moment().add(5,'m'))\r",
											"//https://momentjscom.readthedocs.io/en/latest/moment/03-manipulating/01-add/#:~:text=This%20is%20a%20pretty%20robust,(7%2C%20'days')%3B\r",
											"\r",
											"//Check for a value in a runner automation via csv file and append to the environemt variable for the workspace name\r",
											"var runner = pm.iterationData.get(\"runner_automation\")\r",
											"if (runner) {\r",
											"    pm.variables.set(\"Terraform_WorkspaceName\", runner)\r",
											"    console.log(\"Updating the workspace name from the runner file data\")\r",
											"};\r",
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = JSON.parse(responseBody);\r",
											"\r",
											"pm.environment.set(\"Terraform_WorkspaceID\", jsonData.data.id);\r",
											"pm.environment.set(\"Terraform_WorkspaceName\", jsonData.data.attributes.name)\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": {
										"token": "{{Terraform_Org_Token}}"
									}
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/vnd.api+json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"data\": {\r\n        \"attributes\": {\r\n            \"name\": \"{{Terraform_WorkspaceName}}\",\r\n            \"description\": \"Created via Postman\",\r\n            \"environment\": \"default\",\r\n            \"blueprint-url\": null,\r\n            \"source-module-id\": null,\r\n            \"execution-mode\": \"remote\",\r\n            \"auto-apply\": true,\r\n            \"drift-detection\": true,\r\n            \"speculative-enabled\": false,\r\n            \"pull-request-outputs-enabled\": false,\r\n            \"working-directory\": \"\",\r\n            \"terraform-version\": null,\r\n            \"allow-destroy-plan\": true,\r\n            \"auto-destroy-at\": null,\r\n            \"vcs-repo\": {\r\n                \"display-identifier\": \"{{Terraform_VCS_Path}}\",\r\n                \"identifier\": \"{{Terraform_VCS_Path}}\",\r\n                \"oauth-token-id\": \"{{Terraform_OAuth_Token_ID}}\",\r\n                \"github-app-installation-id\": null,\r\n                \"branch\": \"\",\r\n                \"ingress-submodules\": false,\r\n                \"webhook-url\": \"\",\r\n                \"service-provider\": null,\r\n                \"repository-http-url\": null,\r\n                \"tags-regex\": null\r\n            },\r\n            \"file-triggers-enabled\": false,\r\n            \"trigger-prefixes\": [],\r\n            \"trigger-patterns\": [],\r\n            \"structured-run-output-enabled\": true,\r\n            \"tag-names\": []\r\n        },\r\n        \"relationships\": {\r\n            \"organization\": {\r\n                \"data\": {\r\n                    \"type\": \"organizations\",\r\n                    \"id\": \"{{Terraform_Org_Name}}\"\r\n                }\r\n            }\r\n        },\r\n        \"type\": \"workspaces\"\r\n    }\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": "https://app.terraform.io/api/v2/organizations/{{Terraform_Org_Name}}/workspaces",
								"description": "This request has a pre-request script added to check for variables from a file in a runner.\n\nThe runner file variable needs to set as a \"runner_automation\" in the .csv or .json file loaded in the runner state. If present, the execution will take that iteration variable name instead of the variable loaded from the local environment.\n\n_**Example runner file (copy out and save at .csv to use with a runner) - this will CREATE workspaces named from the .csv values**_\n\nrunner_automation  \napi-ws-1,  \napi-ws-2,  \napi-ws-3,  \napi-ws-4,  \napi-ws-5,  \napi-ws-6,  \napi-ws-7"
							},
							"response": []
						},
						{
							"name": "Update Workspace Variable Sets",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"var moment = require('moment');\r",
											"\r",
											"pm.environment.set('currentdate', moment().format((\"YYYY-MM-DD-HH:SS\")));"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": {
										"token": "{{Terraform_Cloud_User_Token}}"
									}
								},
								"method": "PATCH",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/vnd.api+json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"data\": [\r\n        {\r\n            \"attributes\": {\r\n                \"key\": \"location\",\r\n                \"value\": \"eastus\",\r\n                \"hcl\": false,\r\n                \"sensitive\": false,\r\n                \"category\": \"terraform\"\r\n            },\r\n            \"relationships\": {\r\n                \"configurable\": {\r\n                    \"data\": {\r\n                        \"type\": \"workspaces\",\r\n                        \"id\": \"{{Terraform_WorkspaceID}}\"\r\n                    }\r\n                }\r\n            },\r\n            \"type\": \"vars\"\r\n        },\r\n        {\r\n            \"attributes\": {\r\n                \"key\": \"resourceName\",\r\n                \"value\": \"test-network\",\r\n                \"hcl\": false,\r\n                \"sensitive\": false,\r\n                \"category\": \"terraform\"\r\n            },\r\n            \"relationships\": {\r\n                \"configurable\": {\r\n                    \"data\": {\r\n                        \"type\": \"workspaces\",\r\n                        \"id\": \"{{Terraform_WorkspaceID}}\"\r\n                    }\r\n                }\r\n            },\r\n            \"type\": \"vars\"\r\n        }\r\n    ]\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": "https://app.terraform.io/api/v2/workspaces/{{Terraform_WorkspaceID}}/relationships/vars"
							},
							"response": []
						},
						{
							"name": "Update Workspace Execution Mode",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"var moment = require('moment');\r",
											"\r",
											"pm.environment.set('currentdate', moment().format((\"YYYY-MM-DD-HH:SS\")));"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": {
										"token": "{{Terraform_Cloud_User_Token}}"
									}
								},
								"method": "PATCH",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/vnd.api+json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"data\": {\r\n        \"id\": \"{{Terraform_WorkspaceID}}\",\r\n        \"attributes\": {\r\n            \"execution-mode\": \"agent\"\r\n        },\r\n        \"relationships\": {\r\n            \"agent-pool\": {\r\n                \"data\": {\r\n                    \"type\": \"agent-pools\",\r\n                    \"id\": \"{{Terraform_Agent_Pool_ID}}\"\r\n                }\r\n            }\r\n        },\r\n        \"type\": \"workspaces\"\r\n    }\r\n}\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": "https://app.terraform.io/api/v2/organizations/{{Terraform_Org_Name}}/workspaces/{{Terraform_WorkspaceName}}"
							},
							"response": []
						},
						{
							"name": "Execute Workspace Run",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"var moment = require('moment');\r",
											"\r",
											"pm.environment.set('currentdate', moment().format((\"YYYY-MM-DD-HH:SS\")));\r",
											"pm.environment.set('Terraform_Workspace_AutoDestroy_Date', moment().add(5,'m'))\r",
											"//https://momentjscom.readthedocs.io/en/latest/moment/03-manipulating/01-add/#:~:text=This%20is%20a%20pretty%20robust,(7%2C%20'days')%3B"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"var jsonData = JSON.parse(responseBody);\r",
											"\r",
											"//pm.environment.set(\"Terraform_WorkspaceID\", jsonData.data.id);\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": {
										"token": "{{Terraform_Cloud_User_Token}}"
									}
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/vnd.api+json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"data\": {\r\n        \"attributes\": {\r\n            \"is-destroy\": false,\r\n            \"refresh\": true,\r\n            \"refresh-only\": false\r\n        },\r\n        \"relationships\": {\r\n            \"workspace\": {\r\n                \"data\": {\r\n                    \"type\": \"workspaces\",\r\n                    \"id\": \"{{Terraform_WorkspaceID}}\"\r\n                }\r\n            }\r\n        },\r\n        \"type\": \"runs\"\r\n    }\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": "https://app.terraform.io/api/v2/runs"
							},
							"response": []
						}
					]
				},
				{
					"name": "Delete Resources and Workspace",
					"item": [
						{
							"name": "Run Delete Execution",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"var moment = require('moment');\r",
											"\r",
											"pm.environment.set('currentdate', moment().format((\"YYYY-MM-DD-HH:SS\")));"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": {
										"token": "{{Terraform_Cloud_User_Token}}"
									}
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/vnd.api+json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"data\": {\r\n        \"attributes\": {\r\n            \"comment\": \"plan -destroy\",\r\n            \"is-destroy\": true,\r\n            \"refresh\": true,\r\n            \"refresh-only\": false\r\n        },\r\n        \"relationships\": {\r\n            \"workspace\": {\r\n                \"data\": {\r\n                    \"type\": \"workspaces\",\r\n                    \"id\": \"{{Terraform_WorkspaceID}}\"\r\n                }\r\n            }\r\n        },\r\n        \"type\": \"runs\"\r\n    }\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": "https://app.terraform.io/api/v2/runs"
							},
							"response": []
						},
						{
							"name": "Delete Workspace",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"var moment = require('moment');\r",
											"\r",
											"pm.environment.set('currentdate', moment().format((\"YYYY-MM-DD-HH:SS\")));\r",
											"\r",
											"//Check for a value in a runner automation via csv file and append to the environemt variable for the workspace name\r",
											"var runner = pm.iterationData.get(\"runner_automation\")\r",
											"if (runner) {\r",
											"    pm.variables.set(\"Terraform_WorkspaceName\", runner)\r",
											"    console.log(\"Updating the workspace name from the runner file data\")\r",
											"};"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": {
										"token": "{{Terraform_Org_Token}}"
									}
								},
								"method": "DELETE",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/vnd.api+json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": "https://app.terraform.io/api/v2/organizations/{{Terraform_Org_Name}}/workspaces/{{Terraform_WorkspaceName}}",
								"description": "This request has a pre-request script added to check for variables from a file in a runner.\n\nThe runner file variable needs to set as a \"runner_automation\" in the .csv or .json file loaded in the runner state. If present, the execution will take that iteration variable name instead of the variable loaded from the local environment.  \n\n  \n_**Example runner file (copy out and save at .csv to use with a runner) - this will DELETE workspaces named from the .csv values**_  \n  \nrunner_automation  \napi-ws-1,  \napi-ws-2,  \napi-ws-3,  \napi-ws-4,  \napi-ws-5,  \napi-ws-6,  \napi-ws-7"
							},
							"response": []
						}
					]
				}
			]
		},
		{
			"name": "Audit and Logging",
			"item": [
				{
					"name": "Get TFC Public IP Ranges",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"var moment = require('moment');\r",
									"\r",
									"pm.environment.set('currentdate', moment().format((\"YYYY-MM-DD-HH:SS\")));\r",
									"pm.environment.set('currentDate-raw', moment());\r",
									"console.log(pm.environment.get(\"currentDate-raw\"));"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = JSON.parse(responseBody);\r",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true,
						"disabledSystemHeaders": {
							"content-type": true
						}
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": {
								"token": "{{Terraform_Org_Token}}"
							}
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/vnd.api+json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": "https://app.terraform.io/api/meta/ip-ranges",
						"description": "## Reference Documentation\n\n[https://developer.hashicorp.com/terraform/cloud-docs/api-docs/ip-ranges](https://developer.hashicorp.com/terraform/cloud-docs/api-docs/ip-ranges)"
					},
					"response": []
				},
				{
					"name": "Audit Trail",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"var moment = require('moment');\r",
									"\r",
									"pm.environment.set('currentdate', moment().format((\"YYYY-MM-DD-HH:SS\")));\r",
									"pm.environment.set('currentDate-raw', moment());\r",
									"console.log(pm.environment.get(\"currentDate-raw\"));"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = JSON.parse(responseBody);\r",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true,
						"disabledSystemHeaders": {
							"content-type": true
						}
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": {
								"token": "{{Terraform_Org_Token}}"
							}
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/vnd.api+json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": "https://app.terraform.io/api/v2/organization/audit-trail"
					},
					"response": []
				},
				{
					"name": "Get Usage",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"var moment = require('moment');\r",
									"\r",
									"pm.environment.set('currentdate', moment().format((\"YYYY-MM-DD-HH:SS\")));\r",
									"pm.environment.set('currentDate-raw', moment());\r",
									"console.log(pm.environment.get(\"currentDate-raw\"));"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = JSON.parse(responseBody);\r",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true,
						"disabledSystemHeaders": {
							"content-type": true
						}
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": {
								"token": "{{Terraform_Org_Token}}"
							}
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/vnd.api+json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": "https://app.terraform.io/api/v2/organizations/{{Terraform_Org_Name}}/usage",
						"description": "### Quick query for getting details for usage in your TFC Org."
					},
					"response": []
				},
				{
					"name": "Get Subscription",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"var moment = require('moment');\r",
									"\r",
									"pm.environment.set('currentdate', moment().format((\"YYYY-MM-DD-HH:SS\")));\r",
									"pm.environment.set('currentDate-raw', moment());\r",
									"console.log(pm.environment.get(\"currentDate-raw\"));"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = JSON.parse(responseBody);\r",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true,
						"disabledSystemHeaders": {
							"content-type": true
						}
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": {
								"token": "{{Terraform_Cloud_User_Token}}"
							}
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/vnd.api+json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": "https://app.terraform.io/api/v2/organizations/{{Terraform_Org_Name}}/subscription",
						"description": "### Quick query for getting details for the subsciption in your TFC Org.\n\n#### Notes on Token Authorization Method\n\nThis execution requires a user level token, not org level"
					},
					"response": []
				}
			]
		},
		{
			"name": "Workspace Create",
			"item": [
				{
					"name": "Create Workspace",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"var moment = require('moment');\r",
									"\r",
									"pm.environment.set('currentdate', moment().format((\"YYYY-MM-DD-HH:SS\")));\r",
									"pm.environment.set('Terraform_Workspace_AutoDestroy_Date', moment().add(5,'m'))\r",
									"//https://momentjscom.readthedocs.io/en/latest/moment/03-manipulating/01-add/#:~:text=This%20is%20a%20pretty%20robust,(7%2C%20'days')%3B"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = JSON.parse(responseBody);\r",
									"\r",
									"pm.environment.set(\"Terraform_WorkspaceID\", jsonData.data.id);\r",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disabledSystemHeaders": {
							"content-type": true
						}
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": {
								"token": "{{Terraform_Org_Token}}"
							}
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/vnd.api+json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"data\": {\r\n        \"attributes\": {\r\n            \"name\": \"tf-azure-network2\",\r\n            \"description\": null,\r\n            \"environment\": \"default\",\r\n            \"blueprint-url\": null,\r\n            \"source-module-id\": \"private/bm_mi_lab/networking/azure/0.1.5\",\r\n            \"execution-mode\": \"remote\",\r\n            \"auto-apply\": true,\r\n            \"assessments-enabled\": false,\r\n            \"speculative-enabled\": true,\r\n            \"pull-request-outputs-enabled\": false,\r\n            \"working-directory\": \"\",\r\n            \"terraform-version\": null,\r\n            \"allow-destroy-plan\": true,\r\n            \"auto-destroy-at\": null,\r\n            \"vcs-repo\": null,\r\n            \"file-triggers-enabled\": false,\r\n            \"trigger-prefixes\": [],\r\n            \"trigger-patterns\": [],\r\n            \"structured-run-output-enabled\": true,\r\n            \"tag-names\": []\r\n        },\r\n        \"relationships\": {\r\n            \"organization\": {\r\n                \"data\": {\r\n                    \"type\": \"organizations\",\r\n                    \"id\": \"bm_mi_lab\"\r\n                }\r\n            }\r\n        },\r\n        \"type\": \"workspaces\"\r\n    }\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": "https://app.terraform.io/api/v2/organizations/{{Terraform_Org_Name}}/workspaces"
					},
					"response": [
						{
							"name": "Create Workspace",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/vnd.api+json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"data\": {\r\n        \"attributes\": {\r\n            \"name\": \"{{Terraform_WorkspaceName}}\",\r\n            \"description\": \"Created via Postman\",\r\n            \"environment\": \"default\",\r\n            \"blueprint-url\": null,\r\n            \"source-module-id\": null,\r\n            \"execution-mode\": \"remote\",\r\n            \"auto-apply\": true,\r\n            \"drift-detection\": true,\r\n            \"speculative-enabled\": false,\r\n            \"pull-request-outputs-enabled\": false,\r\n            \"working-directory\": \"\",\r\n            \"terraform-version\": null,\r\n            \"allow-destroy-plan\": true,\r\n            \"auto-destroy-at\": \"{{Terraform_Workspace_AutoDestroy_Date}}\",\r\n            \"vcs-repo\": null,\r\n            \"file-triggers-enabled\": false,\r\n            \"trigger-prefixes\": [],\r\n            \"trigger-patterns\": [],\r\n            \"structured-run-output-enabled\": true,\r\n            \"tag-names\": []\r\n        },\r\n        \"relationships\": {\r\n            \"organization\": {\r\n                \"data\": {\r\n                    \"type\": \"organizations\",\r\n                    \"id\": \"bm_mi_lab\"\r\n                }\r\n            }\r\n        },\r\n        \"type\": \"workspaces\"\r\n    }\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": "https://app.terraform.io/api/v2/organizations/{{Terraform_Org_Name}}/workspaces"
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Date",
									"value": "Wed, 17 Aug 2022 16:31:51 GMT"
								},
								{
									"key": "Content-Type",
									"value": "application/vnd.api+json; charset=utf-8"
								},
								{
									"key": "Transfer-Encoding",
									"value": "chunked"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								},
								{
									"key": "Cache-Control",
									"value": "max-age=0, private, must-revalidate"
								},
								{
									"key": "Etag",
									"value": "W/\"825bdff05deafed4e3821e8a2f7e94ca\""
								},
								{
									"key": "Referrer-Policy",
									"value": "strict-origin-when-cross-origin"
								},
								{
									"key": "Strict-Transport-Security",
									"value": "max-age=63072000; includeSubDomains; preload"
								},
								{
									"key": "Tfp-Api-Version",
									"value": "2.5"
								},
								{
									"key": "Vary",
									"value": "Accept-Encoding"
								},
								{
									"key": "Vary",
									"value": "Accept, Origin"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-Download-Options",
									"value": "noopen"
								},
								{
									"key": "X-Frame-Options",
									"value": "SAMEORIGIN"
								},
								{
									"key": "X-Permitted-Cross-Domain-Policies",
									"value": "none"
								},
								{
									"key": "X-Ratelimit-Limit",
									"value": "30"
								},
								{
									"key": "X-Ratelimit-Remaining",
									"value": "29"
								},
								{
									"key": "X-Ratelimit-Reset",
									"value": "0.734"
								},
								{
									"key": "X-Request-Id",
									"value": "3c9edb0b-8f70-083a-8f6a-afe4349ee509"
								},
								{
									"key": "X-Xss-Protection",
									"value": "1; mode=block"
								}
							],
							"cookie": [],
							"body": "{\n    \"data\": {\n        \"id\": \"ws-Tp6PgBPp9bswSHra\",\n        \"type\": \"workspaces\",\n        \"attributes\": {\n            \"allow-destroy-plan\": true,\n            \"auto-apply\": true,\n            \"auto-destroy-at\": \"2022-08-17T16:36:49.654Z\",\n            \"created-at\": \"2022-08-17T16:31:51.236Z\",\n            \"environment\": \"default\",\n            \"locked\": false,\n            \"name\": \"automate-this\",\n            \"pull-request-outputs-enabled\": false,\n            \"queue-all-runs\": false,\n            \"speculative-enabled\": false,\n            \"structured-run-output-enabled\": true,\n            \"terraform-version\": \"1.2.7\",\n            \"working-directory\": \"\",\n            \"global-remote-state\": false,\n            \"updated-at\": \"2022-08-17T16:31:51.236Z\",\n            \"resource-count\": 0,\n            \"apply-duration-average\": null,\n            \"plan-duration-average\": null,\n            \"policy-check-failures\": null,\n            \"run-failures\": null,\n            \"workspace-kpis-runs-count\": null,\n            \"latest-change-at\": \"2022-08-17T16:31:51.236Z\",\n            \"operations\": true,\n            \"execution-mode\": \"remote\",\n            \"vcs-repo\": null,\n            \"vcs-repo-identifier\": null,\n            \"permissions\": {\n                \"can-update\": true,\n                \"can-destroy\": true,\n                \"can-queue-run\": false,\n                \"can-read-variable\": true,\n                \"can-update-variable\": true,\n                \"can-read-state-versions\": true,\n                \"can-read-state-outputs\": true,\n                \"can-create-state-versions\": false,\n                \"can-queue-apply\": false,\n                \"can-lock\": false,\n                \"can-unlock\": false,\n                \"can-force-unlock\": false,\n                \"can-read-settings\": true,\n                \"can-manage-tags\": true,\n                \"can-manage-run-tasks\": true,\n                \"can-manage-assessments\": true,\n                \"can-read-assessment-results\": true,\n                \"can-queue-destroy\": false\n            },\n            \"actions\": {\n                \"is-destroyable\": true\n            },\n            \"description\": \"Created via Postman\",\n            \"file-triggers-enabled\": false,\n            \"trigger-prefixes\": [],\n            \"trigger-patterns\": [],\n            \"drift-detection\": true,\n            \"last-assessment-result-at\": null,\n            \"source\": \"tfe-api\",\n            \"source-name\": null,\n            \"source-url\": null,\n            \"tag-names\": []\n        },\n        \"relationships\": {\n            \"organization\": {\n                \"data\": {\n                    \"id\": \"bm_mi_lab\",\n                    \"type\": \"organizations\"\n                }\n            },\n            \"current-run\": {\n                \"data\": null\n            },\n            \"latest-run\": {\n                \"data\": null\n            },\n            \"outputs\": {\n                \"data\": []\n            },\n            \"remote-state-consumers\": {\n                \"links\": {\n                    \"related\": \"/api/v2/workspaces/ws-Tp6PgBPp9bswSHra/relationships/remote-state-consumers\"\n                }\n            },\n            \"current-state-version\": {\n                \"data\": null\n            },\n            \"current-configuration-version\": {\n                \"data\": null\n            },\n            \"agent-pool\": {\n                \"data\": null\n            },\n            \"readme\": {\n                \"data\": null\n            },\n            \"current-assessment-result\": {\n                \"data\": null\n            },\n            \"vars\": {\n                \"data\": []\n            }\n        },\n        \"links\": {\n            \"self\": \"/api/v2/organizations/bm_mi_lab/workspaces/automate-this\"\n        }\n    }\n}"
						}
					]
				}
			]
		},
		{
			"name": "Workspace Read",
			"item": [
				{
					"name": "Get All Workspaces",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"var moment = require('moment');\r",
									"\r",
									"pm.environment.set('currentdate', moment().format((\"YYYY-MM-DD-HH:SS\")));\r",
									"pm.environment.set('currentDate-raw', moment());\r",
									"console.log(pm.environment.get(\"currentDate-raw\"));"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"let jsonData = pm.response.json();\r",
									"\r",
									"// Script below will iterate over all workspace objects and return a count of unique Terraform versions\r",
									"let result = {};\r",
									"let workspaceCount = 0\r",
									"let resourceCount = 0\r",
									"let terraformVersions = jsonData.data.map(function(item) {\r",
									"  return item.attributes[\"terraform-version\"];\r",
									"});\r",
									"let resources = jsonData.data.map(function(item) {\r",
									"  return item.attributes[\"resource-count\"];\r",
									"  \r",
									"});\r",
									"\r",
									"for (let ws of jsonData.data){\r",
									"    console.log(ws.id + \" : \" + ws.attributes[\"resource-count\"])\r",
									"}\r",
									"\r",
									"for (let version of terraformVersions) {\r",
									"  if (!result[version]) {\r",
									"    result[version] = 1;\r",
									"  } else {\r",
									"    result[version]++;\r",
									"  }\r",
									"  workspaceCount++;\r",
									"}\r",
									"\r",
									"for (let rs of resources) {\r",
									"    resourceCount = resourceCount + rs;\r",
									"}\r",
									"console.log(\"Workspace Count: \" + workspaceCount)\r",
									"console.log(\"Resource Count: \" + resourceCount)\r",
									"console.log(\"Unique Terraform Versions\")\r",
									"console.log(result);\r",
									"\r",
									"// End Terraform Version Script\r",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true,
						"disabledSystemHeaders": {
							"content-type": true
						}
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": {
								"token": "{{Terraform_Org_Token}}"
							}
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/vnd.api+json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://app.terraform.io/api/v2/organizations/{{Terraform_Org_Name}}/workspaces?page[number]=1&page[size]=100",
							"protocol": "https",
							"host": [
								"app",
								"terraform",
								"io"
							],
							"path": [
								"api",
								"v2",
								"organizations",
								"{{Terraform_Org_Name}}",
								"workspaces"
							],
							"query": [
								{
									"key": "page[number]",
									"value": "1"
								},
								{
									"key": "page[size]",
									"value": "100"
								}
							]
						},
						"description": "### Quick query for getting details for all workspaces in your TFC Org.\n\n#### Notes on Query Parameters\n\nThe TFC API limits to 100 object(workspace) results. Adjust the Query Param of **page\\[number\\]** if needing to query additional workspaces if over the page\\[size\\] number. There is Test code\n\n**Updates/Changes**\n\n- 1/31/2023 - Added Test logic to capture and list out unique Terraform Versions for all workspaces and summate each version count\n- 2/1/2023 - Added Test logic to capture and summate the resource count for all workspaces and log it in the console"
					},
					"response": []
				},
				{
					"name": "Get Workspace by ID",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"var moment = require('moment');\r",
									"\r",
									"pm.environment.set('currentdate', moment().format((\"YYYY-MM-DD-HH:SS\")));\r",
									"pm.environment.set('currentDate-raw', moment());\r",
									"console.log(pm.environment.get(\"currentDate-raw\"));"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"let jsonData = pm.response.json();\r",
									"\r",
									"\r",
									"\r",
									"// End Terraform Version Script\r",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true,
						"disabledSystemHeaders": {
							"content-type": true
						}
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": {
								"token": "{{Terraform_Org_Token}}"
							}
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/vnd.api+json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": "https://app.terraform.io/api/v2/workspaces/{{Terraform_WorkspaceID}}",
						"description": "### Quick query for getting details for all workspaces in your TFC Org.\n\n#### Notes on Query Parameters\n\nThe TFC API limits to 100 object(workspace) results. Adjust the Query Param of **page\\[number\\]** if needing to query additional workspaces if over the page\\[size\\] number. There is Test code\n\n**Updates/Changes**\n\n- 1/31/2023 - Added Test logic to capture and list out unique Terraform Versions for all workspaces and summate each version count\n- 2/1/2023 - Added Test logic to capture and summate the resource count for all workspaces and log it in the console"
					},
					"response": []
				},
				{
					"name": "Cancel Workspace Run",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"var moment = require('moment');\r",
									"\r",
									"pm.environment.set('currentdate', moment().format((\"YYYY-MM-DD-HH:SS\")));\r",
									"pm.environment.set('currentDate-raw', moment());\r",
									"console.log(pm.environment.get(\"currentDate-raw\"));"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"let jsonData = pm.response.json();\r",
									"\r",
									"\r",
									"\r",
									"// End Terraform Version Script\r",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disabledSystemHeaders": {
							"content-type": true
						}
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": {
								"token": "{{Terraform_Org_Token}}"
							}
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/vnd.api+json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://app.terraform.io/api/v2/runs/:run_id/actions/force-cancel",
							"protocol": "https",
							"host": [
								"app",
								"terraform",
								"io"
							],
							"path": [
								"api",
								"v2",
								"runs",
								":run_id",
								"actions",
								"force-cancel"
							],
							"variable": [
								{
									"key": "run_id",
									"value": ""
								}
							]
						},
						"description": "Reference Documentation\n\n- [https://developer.hashicorp.com/terraform/cloud-docs/api-docs/run#forcefully-cancel-a-run](https://developer.hashicorp.com/terraform/cloud-docs/api-docs/run#forcefully-cancel-a-run)"
					},
					"response": []
				},
				{
					"name": "Get Workspace Outputs by WorkspaceID",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"var moment = require('moment');\r",
									"\r",
									"pm.environment.set('currentdate', moment().format((\"YYYY-MM-DD-HH:SS\")));\r",
									"pm.environment.set('currentDate-raw', moment());\r",
									"console.log(pm.environment.get(\"currentDate-raw\"));"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"let jsonData = pm.response.json();\r",
									"\r",
									"\r",
									"\r",
									"// End Terraform Version Script\r",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true,
						"disabledSystemHeaders": {
							"content-type": true
						}
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": {
								"token": "{{Terraform_Org_Token}}"
							}
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/vnd.api+json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": "https://app.terraform.io/api/v2/workspaces/{{Terraform_WorkspaceID}}/current-state-version-outputs",
						"description": "### Quick query for getting details for all workspaces in your TFC Org.\n\n#### Notes on Query Parameters\n\nThe TFC API limits to 100 object(workspace) results. Adjust the Query Param of **page\\[number\\]** if needing to query additional workspaces if over the page\\[size\\] number. There is Test code\n\n**Updates/Changes**\n\n- 1/31/2023 - Added Test logic to capture and list out unique Terraform Versions for all workspaces and summate each version count\n- 2/1/2023 - Added Test logic to capture and summate the resource count for all workspaces and log it in the console"
					},
					"response": []
				}
			]
		},
		{
			"name": "Org Level",
			"item": [
				{
					"name": "Get Organization Info",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"var moment = require('moment');\r",
									"\r",
									"pm.environment.set('currentdate', moment().format((\"YYYY-MM-DD-HH:SS\")));\r",
									"pm.environment.set('currentDate-raw', moment());\r",
									"console.log(pm.environment.get(\"currentDate-raw\"));"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = JSON.parse(responseBody);\r",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true,
						"disabledSystemHeaders": {
							"content-type": true
						}
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": {
								"token": "{{Terraform_Cloud_User_Token}}"
							}
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/vnd.api+json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": "https://app.terraform.io/api/v2/organizations/{{Terraform_Org_Name}}",
						"description": "### Quick query for getting details for the subsciption in your TFC Org.\n\n#### Notes on Token Authorization Method\n\nThis execution requires a user level token, not org level"
					},
					"response": []
				},
				{
					"name": "Get Organization Memberships",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"var moment = require('moment');\r",
									"\r",
									"pm.environment.set('currentdate', moment().format((\"YYYY-MM-DD-HH:SS\")));\r",
									"pm.environment.set('currentDate-raw', moment());\r",
									"console.log(pm.environment.get(\"currentDate-raw\"));"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = JSON.parse(responseBody);\r",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true,
						"disabledSystemHeaders": {
							"content-type": true
						}
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": {
								"token": "{{Terraform_Org_Token}}"
							}
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/vnd.api+json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://app.terraform.io/api/v2/organizations/{{Terraform_Org_Name}}/organization-memberships?filter%5Bstatus%5D=active&include=user&organizationName={{Terraform_Org_Name}}&page[number]=1&page[size]=100",
							"protocol": "https",
							"host": [
								"app",
								"terraform",
								"io"
							],
							"path": [
								"api",
								"v2",
								"organizations",
								"{{Terraform_Org_Name}}",
								"organization-memberships"
							],
							"query": [
								{
									"key": "filter%5Bstatus%5D",
									"value": "active"
								},
								{
									"key": "include",
									"value": "user"
								},
								{
									"key": "organizationName",
									"value": "{{Terraform_Org_Name}}"
								},
								{
									"key": "page[number]",
									"value": "1"
								},
								{
									"key": "page[size]",
									"value": "100"
								}
							]
						}
					},
					"response": []
				}
			]
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					"var moment = require('moment');",
					"",
					"pm.environment.set('currentdate', moment().format((\"YYYY-MM-DD-h:mm\")));"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	]
}